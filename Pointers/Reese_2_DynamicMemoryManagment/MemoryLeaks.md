## Утечка памяти
Утечка памяти происходит, когда выделенная память больше не используется, но не освобождается. Это может произойти, когда:
- адрес памяти потерян
- функция **`free()`** не вызывается, хотя должна; иногда называется скрытой утечкой (hidden leak)

Проблема с утечками памяти заключается в том, что память не может быть восстановлена и использована позже.
Уменьшается объем памяти, доступной диспетчеру кучи (heap manager). Если память повторно выделяется, а затем теряется, программа может завершиться, когда потребуется больше памяти, но malloc не может ее выделить, потому что у нее закончилась память. В крайних случаях
операционная система может дать сбой.
Это показано в следующем простом примере: 
```c
char *chunk;
while (1) {
	chunk = (char*) malloc(1000000);
	printf("Allocating\n");
}
```
### Потеря адреса

Пример потери адреса памяти проиллюстрирован в следующей кодовой последовательности, где pi переназначается новый адрес. Адрес первого выделения памяти теряется, когда pi выделяется память во второй раз. 
```c
int *pi = (int*) malloc(sizeof(int));
*pi = 5;
...
pi = (int*) malloc(sizeof(int));
```
Другой пример выделяет память для строки, инициализирует ее, а затем отображает символ строки за символом: 
```c
char *msg = (char*)malloc(strlen("Susan")+1);
strcpy(msg,"Hello, World!");
while(*name != 0) {
	printf("%c",*name);
	name++;
}
```
Однако он увеличивает имя на единицу с каждой итерацией цикла. В конце остается имя, указывающее на завершающий символ строки NUL. Начальный адрес выделенной памяти потерян ( `./memory_alloc/string_alloc.c`).

### Скрытые утечки памяти
Утечки памяти также могут возникать, когда программа должна освободить память, но не делает этого.
Скрытая утечка памяти происходит, когда объект хранится в куче, даже если объект больше не нужен. Часто это результат оплошности программиста. Основная проблема с этим типом утечки заключается в том, что объект использует память, которая больше не нужна.
и надо вернуть в кучу. В худшем случае диспетчер кучи может быть не в состоянии выделить память по запросу, что может привести к завершению программы. В лучшем случае у нас остается ненужная память. Утечки памяти также могут возникать при освобождении структур, созданных с помощью ключевого слова struct. Если структура содержит указатели на динамически выделяемую память, то эти указатели, возможно, потребуется освободить перед освобождением структуры. Пример этого можно найти в главе 6.